# Development Guidelines & Common Tasks

This document provides instructions for the development workflow, build commands, and common tasks.

## Build and Development Commands

### Development Workflow
```bash
# Install dependencies
pnpm install

# Development mode with hot reload (both CSS and JS)
pnpm run dev

# Build for production (minified)
pnpm run build

# Serve locally for testing
npx http-server -p 8080
```

### Individual Build Commands
```bash
# CSS only
pnpm run build:css    # Production build
pnpm run watch:css    # Watch mode

# JavaScript only
pnpm run build:js     # Production build
pnpm run watch:js     # Watch mode
```

## Development Guidelines

### Adding New Features

1.  **State changes**: Add to the `courseApp()` component in `src/course-app.js`.
2.  **UI components**: Add to `index.html` using Alpine.js directives.
3.  **Translations**: Update all files in `locales/` (en.json, id.json, ja.json).
4.  **Styling**: Use Tailwind utilities; add custom CSS to `src/input.css` if needed.
5.  **Tests**: Add new test cases to `tests/comprehensive.spec.js`.
6.  **Build**: Run `pnpm run build` before committing to ensure no build errors.

### Modifying Semester Logic

The semester structure is dynamic (4-12 semesters) and is generated by `generateSemesterList()` in `src/course-app.js`.

### Working with Translations

All UI text must support EN, ID, and JA.
1.  Add the new key to all JSON files in the `locales/` directory.
2.  Use `x-text="t('key')"` in HTML and `this.t('key')` in JavaScript.

### Performance Considerations

-   **Avoid layout shifts**: Reserve space for dynamic content.
-   **Use Alpine.js efficiently**: Minimize watchers and use cached computed properties for expensive calculations.
-   **Test Core Web Vitals**: Run performance tests (`pnpm run test -- -g "Performance"`) or use Lighthouse.

## Common Tasks

### Update Default Courses
Edit `data/courses.json` directly.

### Change Credit Limits
-   **Via UI**: Use the Settings modal.
-   **Via code**: Edit `settings.semesterMaxCredits` in `data/courses.json`.

### Debug localStorage Issues
Use the browser's developer console:
```javascript
// View saved data
localStorage.getItem('lectureStudyPlan')

// Clear all data
localStorage.clear()
```

### Add New Language
1.  Create `locales/{code}.json` with all translation keys.
2.  Add the language option to the dropdown in `index.html`.
